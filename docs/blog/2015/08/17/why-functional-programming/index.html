<!doctype html>
<html lang="en" class="h-100">

<head>
    

    <title>Amir Karimi - Blog - Why Functional Programming?</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="/assets/css/main.css?v=4" rel="stylesheet">
    <link href="/assets/css/highlight.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">
    
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-38DSNZVGYF"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-38DSNZVGYF');
        </script>
    
    



    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="d-flex flex-column h-100">

    <!-- Begin page content -->
    
<nav class="navbar navbar-expand-lg bg-light mb-4">
    <div class="container">
        <a class="navbar-brand" href="https://amirkarimi.dev">Amir Karimi</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/blog/" >
                            Blog
                        </a>
                    </li>
                
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="/about/" >
                            About
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</nav>

<main class="flex-grow-1 mb-3">
    <div class="container">
        
<div class="row gx-5 page">
    
    <div class="col-lg-3 order-lg-3 mb-1">
        <div class="page-toc">
            <h6>On this page</h6>
            <hr class="my-2"/>
            
        </div>
    </div>
    
    <div class="col-lg-9">
        <h1 class="text-2xl font-bold mb-4">Why Functional Programming?</h1>
        <div class="page-content">
            <p>There are plenty of reasons why functional programming are becoming mainstream, but I came across the one I think is the most visible.</p>
<!--more-->

<p>Several days ago we were improving the file exporting functionality of an enterprise software, specially for exporting large Excel files. </p>
<p>The legacy code loads the data, creates an Excel file in memory, writes the data to the excel file and send it to the user over the HTTP.</p>
<p>This solution <strong>brings the data to the code</strong>, which is inefficient.</p>
<p>Instead, we decided to <strong>bring the code to the data</strong> which was very efficient. We could generate a 500MB CSV (as CSV is more compatible with streaming than Excel) file without using more than several kilobytes of RAM. </p>
<p>We built a function which gets an entity as input and returns a CSV row (the code), then gave it to another function which maps the data to the CSV rows using the provided function (bringing the data to the code).</p>
<p>This is the idea behind map/reduce and it truly is an efficient approach.</p>
<p>The request for such scenarios are increasing, and of course, functional programming shines here and makes everything super simple and clean. The same idea is implemented in Scala, Java, .NET, Ruby, Python, Node, etc. yet all of them are implemented with <strong>functional programming</strong> in mind.</p>
<p>Here is a more advanced sample in Scala on Play using <a href="http://www.reactivemongo.org/">ReactiveMongo</a> and <a href="https://www.playframework.com/documentation/2.4.x/Iteratees">Iteratees</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enumerator</span><span class="p">.</span><span class="n">outputStream</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CSVWriter</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">output</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Write headers</span>
<span class="w">  </span><span class="n">writer</span><span class="p">.</span><span class="n">writeRow</span><span class="p">(</span><span class="n">csvCols</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Ready to fetch</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">enumerate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">purchaseOrderReportService</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">findQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">cursor</span><span class="p">[</span><span class="nc">PurchaseOrderReportModel</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">enumerate</span><span class="p">()</span><span class="w"></span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">iteratee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Iteratee</span><span class="p">.</span><span class="n">foreach</span><span class="p">[</span><span class="nc">PurchaseOrderReportModel</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"></span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Seq</span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">order</span><span class="p">.</span><span class="n">student</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">firstName</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">order</span><span class="p">.</span><span class="n">student</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">lastName</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="c1">//...</span>
<span class="w">    </span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Write body</span>
<span class="w">    </span><span class="n">writer</span><span class="p">.</span><span class="n">writeRow</span><span class="p">(</span><span class="n">cells</span><span class="p">.</span><span class="n">flatten</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="n">enumerate</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">iteratee</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nc">Result</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">ResponseHeader</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span><span class="nc">CONTENT_DISPOSITION</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">s&quot;attachment; filename=export.csv&quot;</span><span class="p">)),</span><span class="w"></span>
<span class="w">  </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">content</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>This code even controls the data follow based on the client (consumer) speed.</p>
        </div>
        
        <div class="mt-5 mb-4 gap-2 d-flex justify-content-between">
            
            
            <a class="btn btn-outline-secondary" href="/blog/2015/08/19/installing-rvm-on-ubuntu-desktop/">
                Installing RVM on Ubuntu Desktop
                <span aria-hidden="true">&raquo;</span>
            </a>                
            
        </div>
        
        
    <div class="my-5"></div>
    <div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://amir-karimi.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
</div>

    </div>
</main>


    <footer class="footer mt-auto py-3">
        
        <div class="container d-flex flex-wrap justify-content-between">
            <div>
                <span class="mb-3 mb-md-0 text-muted">
                    &copy; 2023
                    <a href="https://amirkarimi.dev" class="text-muted">Amir Karimi</a>.
                    All Rights Reserved.
                </span>
            </div>

            
            <div>
                <div class="hstack gap-2 social-icons">
    <a href="https://twitter.com/4m1rk">
        <svg role="img" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
    </a>
    <a href="https://www.linkedin.com/in/amirkarimi">
        <svg role="img"  width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
    </a>
    <a href="https://github.com/amirkarimi">
        <svg role="img"  width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
</div>
            </div>
            
        </div>
    </footer>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="/assets/js/popper.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
</body>
</html>