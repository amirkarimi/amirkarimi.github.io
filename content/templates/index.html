{% extends "base.html" %}
{% block title %}{{ config.data.name }} - {{ config.data.title }}{% endblock %}

{# No social_links in footer in the landing page #}
{% block footer_links %}
{% endblock %}

{% block head %}
{{ super() }}
<meta name="description" content="{{ config.data.name }} - {{ config.data.title }}">
<meta name="keywords" content="{{ config.data.keywords }}" />

<style>
    body {
        background-color: #f7f7f7;
        background-image: url("/assets/img/groovepaper.png");
    }
    footer {
        background: linear-gradient(to bottom, transparent 10%, rgba(0, 0, 0, 0.1));
    }
</style>
{% endblock %}

{% macro navbar() %}
<div id="local-navbar">
    <nav class="nav flex-column text-nowrap">
        <a class="nav-link" href="/blog">
            <i class="fa-solid fa-pen-to-square"></i> Blog
        </a>
        <a class="nav-link" href="{{ config.pdf_resume_path }}">
            <i class="fa-regular fa-file-pdf"></i> PDF Version
        </a>
        <hr/>
        <a class="nav-link">
            <i class="fa-solid fa-location-dot"></i> {{config.data.location}}
        </a>
        <a class="nav-link" href="mailto:info@amirkarimi.dev">
            <i class="fa-solid fa-envelope"></i> {{config.data.email}}
        </a>
        <a class="nav-link" href="tel:{{config.data.phone.replace(' ', '')}}">
            <i class="fa-solid fa-phone"></i> {{config.data.phone}}
        </a>
        <a class="nav-link" href="{{ config.data.calendar }}">
            <i class="fa-solid fa-calendar"></i> Schedule a Meeting
        </a>
        <hr/>
        <span class="nav-link nav-icons">
            <a href="{{ config.data.linkedin }}" title="LinkedIn">
                <i class="fa-brands fa-linkedin"></i>
            </a>
            <a href="{{ config.data.github }}" title="Github">
                <i class="fa-brands fa-github"></i>
            </a>
            <a href="{{ config.data.twitter }}" title="Twitter">
                <i class="fa-brands fa-square-twitter"></i>
            </a>
        </span>
    </nav>
</div>
{% endmacro %}

{% macro section_header(id, title, icon) %}
<div class="d-flex flex-row mt-4">
    <h4 class="section-header" id="{{id}}"><i class="{{icon}}"></i> {{title}}</h4>
    <hr class="flex-fill ms-2"/>
</div>
{% endmacro %}

{% macro image() %}
<img class="rounded mb-4 shadow" style="width: 12em" src="/assets/img/amir4.jpg" alt="Amir's Face">
{% endmacro %}

{% block main %}
<div class="container mt-4">
    <nav class="d-lg-none navbar navbar-collapse mb-4 sticky-top me-2">
        <a class="navbar-brand" href="#"></a>
        <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#topNavbar"
            aria-controls="topNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse mt-2 px-1 py-2 rounded border bg-light" id="topNavbar">
            {{ navbar() }}
        </div>
    </nav>

    <div class="d-lg-none text-center">
        {{ image() }}
    </div>

    <div class="d-flex flex-row">
        <div class="me-5 d-none d-lg-block">
            {{ image() }}
            <div class="sticky-top">
                {{ navbar() }}
            </div>
        </div>
        <div class="flex-fill">
            <div>
                <div id="intro">
                    <div id="name">
                        {{ config.data.name }}
                    </div>
                    <div id="title">
                        {{ config.data.title }}
                    </div>
                    <div class="my-2">
                        {{ config.data.intro }}
                    </div>
                </div>

                <!-- SKILLS -->

                <div class="row mt-4">
                    {% for skillset in config.data.skills %}
                    <div class="col-md-3 col-sm-6 mb-3 mb-md-0">
                        <h5 class="mb-3">{{skillset}}</h5>
                            {% for skill in config.data.skills[skillset] %}
                            <div class="text-muted text-truncate my-1">
                                {% with stack = config.data.stacks[skill] %}
                                    <i class="{{stack.icon}} item-icon"></i>
                                    {{stack.title}}
                                {% endwith %}
                            </div>
                            {% endfor %}
                    </div>
                    {% endfor %}
                </div>

                <!-- POSITIONS -->
                
                {{ section_header("positions", "Positions", "fa-solid fa-briefcase") }}
                {% for position in config.data.positions %}
                    {% include 'resume/position.html' %}
                {% endfor %}

                <!-- PROJECTS -->
                
                {{ section_header("projects", "Featured Projects", "fa-solid fa-hammer") }}
                {% for project in config.data.projects %}
                    {% if project.hide is not defined or not project.hide %}
                        {% include 'resume/project.html' %}
                    {% endif %}
                {% endfor %}

                <!-- EDUCATION -->
                
                {{ section_header("education", "Education", "fa-solid fa-graduation-cap") }}
                {% for degree in config.data.education %}
                    {% include 'resume/degree.html' %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
